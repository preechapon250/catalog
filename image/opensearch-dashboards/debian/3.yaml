# syntax=dhi/build:1-debian13

# DO NOT EDIT THIS FILE MANUALLY
# generated with 'dhi def merge image/opensearch-dashboards/debian/3.yaml'

name: OpenSearch Dashboards 3.x
image: dhi/opensearch-dashboards
variant: runtime
tags:
    - "3"
    - "3.3"
    - 3.3.0
    - 3-debian13
    - 3.3-debian13
    - 3.3.0-debian13
platforms:
    - linux/amd64
    - linux/arm64
dates:
    release: "2025-05-06"
vars:
    ALERTING_DASHBOARDS_COMMIT_SHA: f0c57a89ba6ecb38f7d0ff48009c2e87fda8552d
    ALERTING_DASHBOARDS_VERSION: 3.3.0.0
    ANOMALY_DETECTION_DASHBOARDS_COMMIT_SHA: d0b8b1d607b61843d5703508a84bd00a50778306
    ANOMALY_DETECTION_DASHBOARDS_VERSION: 3.3.0.0
    ARCH: '#{ target.arch == "amd64" ? "amd64" : "arm64" }'
    ASSISTANT_DASHBOARDS_COMMIT_SHA: 2979db8b237b2669c718266082a0eeaa4d51f3af
    ASSISTANT_DASHBOARDS_VERSION: 3.3.0.0
    CUSTOM_IMPORT_MAP_DASHBOARDS_COMMIT_SHA: 89cbccbb7f7f8488fd843993a249c0e879822e56
    CUSTOM_IMPORT_MAP_DASHBOARDS_VERSION: 3.3.0.0
    FLOW_FRAMEWORK_DASHBOARDS_COMMIT_SHA: 4c97fb24df3125e28a0f741e307d26e1e849fa95
    FLOW_FRAMEWORK_DASHBOARDS_VERSION: 3.3.0.0
    FUNCTIONAL_TEST_DASHBOARDS_COMMIT_SHA: fd3968d51257cafab31e5f8397bdf5a26dcabad7
    INDEX_MANAGEMENT_DASHBOARDS_COMMIT_SHA: f74d5cc5248f1f4baec4f2bc0fca4e0ffc4aa099
    INDEX_MANAGEMENT_DASHBOARDS_VERSION: 3.3.0.0
    ML_COMMONS_DASHBOARDS_COMMIT_SHA: db98eb0d6dac2884054258e17e2d85d757df638e
    ML_COMMONS_DASHBOARDS_VERSION: 3.3.0.0
    NODE_BUILD_REF: dhi/node:20.19.6-debian13-dev@sha256:b2e4556f0a42a43d0480cd03a56406bc2b97728cf0d6f90a3583dea09a033c56
    NODE_RUNTIME_REF: dhi/node:20.19.6-debian13@sha256:b4404cabfacf04a3f474efaffca23149ce57c5efbf55794c6388709b63ebe04f
    NODE_RUNTIME_VERSION: 20.19.6
    NOTIFICATIONS_DASHBOARDS_COMMIT_SHA: 886df223102c79cfa1ad305cf8558607fe4b501c
    NOTIFICATIONS_DASHBOARDS_VERSION: 3.3.0.0
    OBSERVABILITY_DASHBOARDS_COMMIT_SHA: 994b2074e04f76c3f0455bc8f78d8397ccb2b933
    OBSERVABILITY_DASHBOARDS_VERSION: 3.3.0.0
    OPEN_SEARCH_DASHBOARDS_COMMIT_SHA: fbc260ec5a09d1c39270d20c9736f602ab4425d5
    OPENSEARCH_BUILD_ARCH: '#{ target.arch == "amd64" ? "linux" : "linux-arm" }'
    OPENSEARCH_BUILD_COMMIT_SHA: 3bf47c80ec5a46dcf0b61b35b3d2b39ad06bbf5b
    OPENSEARCH_BUILD_VERSION: 3.3.2
    OPENSEARCH_DASHBOARDS_ARCH: '#{ target.arch == "amd64" ? "x64" : "arm64" }'
    OPENSEARCH_DASHBOARDS_COMMIT_SHA: fbc260ec5a09d1c39270d20c9736f602ab4425d5
    OPENSEARCH_DASHBOARDS_MAJOR_MINOR_VERSION: "3.3"
    OPENSEARCH_DIST_ARCH: '#{ target.arch == "amd64" ? "linux-x64" : "linux-arm64" }'
    QUERY_INSIGHTS_DASHBOARDS_COMMIT_SHA: df7d247fd68634957f8a6d1f6b26fe7d21ac7a4c
    QUERY_INSIGHTS_DASHBOARDS_VERSION: 3.3.0.0
    QUERY_WORKBENCH_DASHBOARDS_COMMIT_SHA: 41f355e9b4bf2ed4831427303821eaca20762d89
    QUERY_WORKBENCH_DASHBOARDS_VERSION: 3.3.0.0
    REPORTS_DASHBOARDS_COMMIT_SHA: 28033041820e912e71a030f772383797a1e5de9e
    REPORTS_DASHBOARDS_VERSION: 3.3.0.0
    SEARCH_RELEVANCE_DASHBOARDS_COMMIT_SHA: ac442c284e2fdcb595a7353fed4a93a424507fee
    SEARCH_RELEVANCE_DASHBOARDS_VERSION: 3.3.0.0
    SECURITY_ANALYTICS_DASHBOARDS_COMMIT_SHA: 1a4d17385044530b77415e62126bf9b4ef390cf4
    SECURITY_ANALYTICS_DASHBOARDS_VERSION: 3.3.0.0
    SECURITY_DASHBOARDS_COMMIT_SHA: 089014895e136da23b8c810b4b2cf121622b5ab8
    SECURITY_DASHBOARDS_VERSION: 3.3.0.0
    SEMVER_MAJOR_MINOR_VERSION: "3.3"
    SEMVER_MAJOR_VERSION: "3"
    SEMVER_VERSION: 3.3.0
    VERSION: 3.3.0
contents:
    packages:
        - '!libelogind0'
        - '!mawk'
        - '!original-awk'
        - base-files
        - bash
        - ca-certificates
        - coreutils
        - findutils
        - grep
        - libstdc++6
    builds:
        - name: opensearch-dashboards from source
          uses: dhi/node:20.19.6-debian13-dev@sha256:b2e4556f0a42a43d0480cd03a56406bc2b97728cf0d6f90a3583dea09a033c56
          contents:
            packages:
                - bash
                - coreutils
                - findutils
                - gnupg
                - sed
                - tar
                - xz-utils
                - gzip
                - grep
                - unzip
            files:
                - url: git+https://github.com/opensearch-project/OpenSearch-Dashboards.git#3.3.0
                  checksum: fbc260ec5a09d1c39270d20c9736f602ab4425d5
                  path: ${source.dir}/opensearch-dashboards
                  spdx:
                    name: opensearch-dashboards
                    version: 3.3.0
                    packages:
                        - name: opensearch-dashboards
                          purl: pkg:dhi/opensearch-dashboards@3.3.0
                          license: Apache-2.0
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-observability.git#3.3.0.0
                  checksum: 994b2074e04f76c3f0455bc8f78d8397ccb2b933
                  path: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-reporting.git#3.3.0.0
                  checksum: 28033041820e912e71a030f772383797a1e5de9e
                  path: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-query-workbench.git#3.3.0.0
                  checksum: 41f355e9b4bf2ed4831427303821eaca20762d89
                  path: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-maps.git#3.3.0.0
                  checksum: 89cbccbb7f7f8488fd843993a249c0e879822e56
                  path: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/anomaly-detection-dashboards-plugin.git#3.3.0.0
                  checksum: d0b8b1d607b61843d5703508a84bd00a50778306
                  path: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/ml-commons-dashboards.git#3.3.0.0
                  checksum: db98eb0d6dac2884054258e17e2d85d757df638e
                  path: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/index-management-dashboards-plugin.git#3.3.0.0
                  checksum: f74d5cc5248f1f4baec4f2bc0fca4e0ffc4aa099
                  path: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-notifications.git#3.3.0.0
                  checksum: 886df223102c79cfa1ad305cf8558607fe4b501c
                  path: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/alerting-dashboards-plugin.git#3.3.0.0
                  checksum: f0c57a89ba6ecb38f7d0ff48009c2e87fda8552d
                  path: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/security-analytics-dashboards-plugin.git#3.3.0.0
                  checksum: 1a4d17385044530b77415e62126bf9b4ef390cf4
                  path: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/security-dashboards-plugin.git#3.3.0.0
                  checksum: 089014895e136da23b8c810b4b2cf121622b5ab8
                  path: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-search-relevance.git#3.3.0.0
                  checksum: ac442c284e2fdcb595a7353fed4a93a424507fee
                  path: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-assistant.git#3.3.0.0
                  checksum: 2979db8b237b2669c718266082a0eeaa4d51f3af
                  path: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/dashboards-flow-framework.git#3.3.0.0
                  checksum: 4c97fb24df3125e28a0f741e307d26e1e849fa95
                  path: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
                  uid: 1000
                  gid: 1000
                - url: git+https://github.com/opensearch-project/query-insights-dashboards.git#3.3.0.0
                  checksum: df7d247fd68634957f8a6d1f6b26fe7d21ac7a4c
                  path: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
                  uid: 1000
                  gid: 1000
          pipeline:
            - name: patch opensearch-dashboards with unified yarn patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards
            - name: patch opensearch-dashboards base with specific yarn patch
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/base-patch.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards
            - name: patch observabilityDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
            - name: patch reportsDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: false
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
            - name: patch queryWorkbenchDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
            - name: patch anomalyDetectionDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
            - name: patch indexManagementDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
            - name: patch notificationsDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
            - name: patch alertingDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
            - name: patch securityAnalyticsDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
            - name: patch securityDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
            - name: patch searchRelevanceDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
            - name: patch assistantDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
            - name: patch customImportMapDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
            - name: patch mlCommonsDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
            - name: patch flowFrameworkDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
            - name: patch queryInsightsDashboards with unified patches
              uses: yarn/bump@v1
              privileged: true
              with:
                patches: ${source.dir}/patches/unified-patches.json
                skip-yarn-add: true
                yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
            - name: Bootstrap opensearch-dashboards with plugins
              privileged: true
              runs: |
                set -eux -o pipefail

                cd ${source.dir}/opensearch-dashboards
                yarn osd bootstrap --single-version 'ignore'
            - name: build all plugins
              privileged: true
              runs: |
                set -eux -o pipefail

                cd ${source.dir}/opensearch-dashboards/plugins

                plugin_dirs=$(ls -1d */ | sed 's:/$::')
                for dir_name in $plugin_dirs; do
                  echo "Building plugin: ${dir_name}"
                  cd "${dir_name}"
                  yarn build
                  cd ..
                done
            - name: build opensearch-dashboards
              privileged: true
              runs: |
                set -eux -o pipefail

                cd ${source.dir}/opensearch-dashboards
                yarn run build-platform --${OPENSEARCH_BUILD_ARCH} --skip-os-packages
            - name: extract opensearch-dashboards
              runs: |
                set -eux -o pipefail

                cd ${source.dir}/opensearch-dashboards
                # take the tarball in the build directory and extract it to the target directory
                ls -la ${source.dir}/opensearch-dashboards/build
                ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards
                ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards-3.3.0-SNAPSHOT-${OPENSEARCH_DIST_ARCH}
                cp -r ${source.dir}/opensearch-dashboards/build/opensearch-dashboards ${target.dir}/opensearch-dashboards
            - name: extract plugin builds to target
              runs: |
                set -eux -o pipefail

                # Create plugins directory in target
                mkdir -p ${target.dir}/opensearch-dashboards/plugins

                # For each plugin directory, find a zip containing 3.3.0 (handles optional ".0") and extract it
                cd ${source.dir}/opensearch-dashboards/plugins

                plugin_dirs=$(ls -1d */ | sed 's:/$::')
                for dir_name in $plugin_dirs; do
                  build_dir="${dir_name}/build"
                  echo "Processing plugin: ${dir_name}"
                  if [ ! -d "${build_dir}" ]; then
                    echo "Error: build directory not found for ${dir_name}, skipping"
                    exit 1
                  fi

                  # Use find to locate a zip file that contains the VERSION in its name.
                  # This handles names like plugin-3.3.0.zip and plugin-3.3.0.0.zip
                  found_zip=$(find "${build_dir}" -maxdepth 1 -type f -iname "*3.3.0*.zip" | head -n 1 || true)

                  if [ -z "${found_zip}" ]; then
                    echo "Error: No zip found for plugin ${dir_name} containing version 3.3.0"
                    exit 1
                  fi

                  echo "Found artifact: ${found_zip}, extracting to ${target.dir}/opensearch-dashboards/plugins/"
                  unzip -q "${found_zip}" -d "${target.dir}/opensearch-dashboards/plugins/"
                done
            - name: copy over plugins to final dir inside opensearch-dashboards plugins dir
              runs: |
                set -eux -o pipefail

                mkdir -p ${source.dir}/tmp/plugins
                cp -r ${target.dir}/opensearch-dashboards/plugins/opensearch-dashboards/* ${source.dir}/tmp/plugins
                rm -rf ${target.dir}/opensearch-dashboards/plugins
                rm -rf ${source.dir}/tmp/plugins/opensearch-dashboards
                cp -r ${source.dir}/tmp/plugins ${target.dir}/opensearch-dashboards/plugins
          paths:
            - type: file
              path: /src/patches/unified-patches.json
              uid: 1000
              gid: 1000
              mode: "0777"
              source: image/opensearch-dashboards/patch/unified-patches.json
            - type: file
              path: /src/patches/base-patch.json
              uid: 1000
              gid: 1000
              mode: "0777"
              source: image/opensearch-dashboards/patch/base-patch.json
          accounts:
            run-as: opensearch-dashboards
            users:
                - name: opensearch-dashboards
                  uid: 1000
                  gid: 1000
            groups:
                - name: opensearch-dashboards
                  gid: 1000
                  members:
                    - opensearch-dashboards
          outputs:
            - source: ${target.dir}/opensearch-dashboards
              target: /usr/share/opensearch-dashboards
              uid: 0
              gid: 0
            - source: ${target.dir}/opensearch-dashboards/config
              target: /usr/share/opensearch-dashboards/config
              uid: 1000
              gid: 1000
            - source: /opt/docker/sbom/opensearch-dashboards
              target: /opt/docker/sbom/opensearch-dashboards
              uid: 0
              gid: 0
        - name: opensearch-dashboards files from upstream
          contents:
            packages:
                - bash
                - coreutils
                - findutils
            files:
                - url: git+https://github.com/opensearch-project/opensearch-build.git#3.3.2
                  checksum: 3bf47c80ec5a46dcf0b61b35b3d2b39ad06bbf5b
                  path: ${source.dir}/opensearch-build-3bf47c80ec5a46dcf0b61b35b3d2b39ad06bbf5b
                  uid: 0
                  gid: 0
          pipeline:
            - name: copy config and entrypoint files
              runs: |
                set -eux -o pipefail

                cp "${source.dir}/opensearch-build-3bf47c80ec5a46dcf0b61b35b3d2b39ad06bbf5b/docker/release/config/opensearch-dashboards/opensearch-dashboards-docker-entrypoint-3.x.sh" "${target.dir}/docker-entrypoint.sh"
                # /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
                cp "${source.dir}/opensearch-build-3bf47c80ec5a46dcf0b61b35b3d2b39ad06bbf5b/config/opensearch_dashboards-3.x.yml" "${target.dir}/opensearch_dashboards.yml"
            - name: customize config
              runs: |
                set -eux -o pipefail

                # This is what upstream does in their docker images so it is important to do this here
                echo "Setting default network host in opensearch-dashboards config..."
                echo "server.host: '0.0.0.0'" >> "${target.dir}/opensearch_dashboards.yml"
          outputs:
            - source: ${target.dir}/docker-entrypoint.sh
              target: /usr/local/bin/docker-entrypoint.sh
              uid: 0
              gid: 0
            - source: ${target.dir}/opensearch_dashboards.yml
              target: /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
              uid: 1000
              gid: 1000
    artifacts:
        - name: dhi/node:20.19.6-debian13@sha256:b4404cabfacf04a3f474efaffca23149ce57c5efbf55794c6388709b63ebe04f
          includes:
            - opt/nodejs
          uid: 0
          gid: 0
accounts:
    run-as: opensearch-dashboards
    users:
        - name: opensearch-dashboards
          uid: 1000
          gid: 1000
    groups:
        - name: opensearch-dashboards
          gid: 1000
          members:
            - opensearch-dashboards
os-release:
    name: Docker Hardened Images (Debian)
    id: debian
    version-id: "13"
    version-codename: trixie
    pretty-name: Docker Hardened Images/Debian GNU/Linux 13 (trixie)
    home-url: https://docker.com/products/hardened-images/
    bug-report-url: https://docker.com/support/
work-dir: /usr/share/opensearch-dashboards
environment:
    HOME: /usr/share/opensearch-dashboards
    OPENSEARCH_DASHBOARDS_HOME: /usr/share/opensearch-dashboards
    OPENSEARCH_DASHBOARDS_PATH_CONF: /usr/share/opensearch-dashboards/config
    PATH: /usr/share/opensearch-dashboards/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
paths:
    - type: directory
      path: /usr/share/opensearch-dashboards/data
      uid: 1000
      gid: 1000
    - type: directory
      path: /usr/share/opensearch-dashboards/logs
      uid: 1000
      gid: 1000
    - type: symlink
      path: /usr/share/opensearch-dashboards/node
      uid: 0
      gid: 0
      source: /opt/nodejs/node-v20.19.6
annotations:
    org.opencontainers.image.description: A minimal OpenSearch Dashboards image
    org.opencontainers.image.licenses: Apache-2.0
entrypoint:
    - /usr/local/bin/docker-entrypoint.sh
cmd:
    - opensearch-dashboards
ports:
    - 5601/tcp
tests:
    - name: Run opensearch-dashboards testcontainers tests
      directory: image/opensearch-dashboards/tests
      commands:
        - go test . -count=1 -v
      exit-code: 0
    - name: Run shared opensearch tests
      directory: ecosystem/opensearch/test
      commands:
        - go test . -count=1 -v
      exit-code: 0
    - name: Run common testcontainers tests
      directory: test/go-testing/base
      commands:
        - go test . -count=1 -v
      exit-code: 0
