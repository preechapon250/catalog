# syntax=dhi.io/build:2-debian13

name: OpenSearch Dashboards 3.x
image: dhi.io/opensearch-dashboards
variant: runtime
tags:
  - "3"
  - "3.4"
  - 3.4.0
  - 3-debian13
  - 3.4-debian13
  - 3.4.0-debian13
platforms:
  - linux/amd64
  - linux/arm64
dates:
  release: "2025-05-06"
vars:
  ALERTING_DASHBOARDS_COMMIT_SHA: 0a6a99334c15de17d75ea0cc8bab253a94eb86ac
  ALERTING_DASHBOARDS_VERSION: 3.4.0.0
  ANOMALY_DETECTION_DASHBOARDS_COMMIT_SHA: ff906088864d19e6f138a7f4cd2b1b79b9092b63
  ANOMALY_DETECTION_DASHBOARDS_VERSION: 3.4.0.0
  ARCH: '#{ target.arch == "amd64" ? "amd64" : "arm64" }'
  ASSISTANT_DASHBOARDS_COMMIT_SHA: 4f07a0d44ab4d1f59fe678b3dae335c0f560ad51
  ASSISTANT_DASHBOARDS_VERSION: 3.4.0.0
  CUSTOM_IMPORT_MAP_DASHBOARDS_COMMIT_SHA: f5c851e6861457fdb35caf481245038402436f17
  CUSTOM_IMPORT_MAP_DASHBOARDS_VERSION: 3.4.0.0
  FLOW_FRAMEWORK_DASHBOARDS_COMMIT_SHA: 42a29c30deb753b4b3b80c8bd4691237f78bae85
  FLOW_FRAMEWORK_DASHBOARDS_VERSION: 3.4.0.0
  FUNCTIONAL_TEST_DASHBOARDS_COMMIT_SHA: fd3968d51257cafab31e5f8397bdf5a26dcabad7
  INDEX_MANAGEMENT_DASHBOARDS_COMMIT_SHA: 5bdca73257641eeb02168e5e6ba973fd325a28e7
  INDEX_MANAGEMENT_DASHBOARDS_VERSION: 3.4.0.0
  ML_COMMONS_DASHBOARDS_COMMIT_SHA: 464ba767a693676f1b81e847eba254749d2c9e56
  ML_COMMONS_DASHBOARDS_VERSION: 3.4.0.0
  NODE_BUILD_REF: dhi/node:20.20.0-debian13-dev@sha256:ff00f76105331ba5b87ece2e33d46d453edb27dfca177d30f34cd88f84e0b948
  NODE_RUNTIME_REF: dhi/node:20.20.0-debian13@sha256:348f038757cc47f231bf4be5932f1227dc7535f0d6d0b2c8f0f6b94b4c937cd9
  NODE_RUNTIME_VERSION: 20.20.0
  NOTIFICATIONS_DASHBOARDS_COMMIT_SHA: 099f245a630d2e324c380fd9ca851f99b99e3c03
  NOTIFICATIONS_DASHBOARDS_VERSION: 3.4.0.0
  OBSERVABILITY_DASHBOARDS_COMMIT_SHA: 38ffdc9bd80254a08ac67abf75141385867baf3e
  OBSERVABILITY_DASHBOARDS_VERSION: 3.4.0.0
  OPEN_SEARCH_DASHBOARDS_COMMIT_SHA: fbc260ec5a09d1c39270d20c9736f602ab4425d5
  OPENSEARCH_BUILD_ARCH: '#{ target.arch == "amd64" ? "linux" : "linux-arm" }'
  OPENSEARCH_BUILD_COMMIT_SHA: 9917c3edf20efcd4db8328b732a6cfc4673675ca
  OPENSEARCH_BUILD_VERSION: 3.4.0
  OPENSEARCH_DASHBOARDS_ARCH: '#{ target.arch == "amd64" ? "x64" : "arm64" }'
  OPENSEARCH_DASHBOARDS_COMMIT_SHA: c1d92e84395038f5f99e64e27b00c00fbabcd075
  OPENSEARCH_DASHBOARDS_MAJOR_MINOR_VERSION: "3.4"
  OPENSEARCH_DIST_ARCH: '#{ target.arch == "amd64" ? "linux-x64" : "linux-arm64" }'
  QUERY_INSIGHTS_DASHBOARDS_COMMIT_SHA: 418bc1de322b67345eaee6c72465973d8c34049d
  QUERY_INSIGHTS_DASHBOARDS_VERSION: 3.4.0.0
  QUERY_WORKBENCH_DASHBOARDS_COMMIT_SHA: dec5f72bc48917751dde1b38f0e653a15e5091b9
  QUERY_WORKBENCH_DASHBOARDS_VERSION: 3.4.0.0
  REPORTS_DASHBOARDS_COMMIT_SHA: 9897418e8372e3d588c1979e60b3efc6ff97db2e
  REPORTS_DASHBOARDS_VERSION: 3.4.0.0
  SEARCH_RELEVANCE_DASHBOARDS_COMMIT_SHA: b6d71572cd7678bd84e1821b7dfea6f2cb5f94db
  SEARCH_RELEVANCE_DASHBOARDS_VERSION: 3.4.0.0
  SECURITY_ANALYTICS_DASHBOARDS_COMMIT_SHA: 1048b97e9f06a59c8e486405c94f1312372dc150
  SECURITY_ANALYTICS_DASHBOARDS_VERSION: 3.4.0.0
  SECURITY_DASHBOARDS_COMMIT_SHA: 08375f7f429f136cc7fd8f9a14845993101d087d
  SECURITY_DASHBOARDS_VERSION: 3.4.0.0
  SEMVER_MAJOR_MINOR_VERSION: "3.4"
  SEMVER_MAJOR_VERSION: "3"
  SEMVER_VERSION: 3.4.0
  VERSION: 3.4.0
contents:
  packages:
    - '!libelogind0'
    - '!mawk'
    - '!original-awk'
    - base-files
    - bash
    - ca-certificates
    - coreutils
    - findutils
    - grep
    - libstdc++6
  builds:
    - name: opensearch-dashboards from source
      uses: dhi.io/node:20.20.0-debian13-dev@sha256:ff00f76105331ba5b87ece2e33d46d453edb27dfca177d30f34cd88f84e0b948
      contents:
        packages:
          - bash
          - coreutils
          - findutils
          - gnupg
          - sed
          - tar
          - xz-utils
          - gzip
          - grep
          - unzip
        files:
          - url: git+https://github.com/opensearch-project/OpenSearch-Dashboards.git#3.4.0
            checksum: c1d92e84395038f5f99e64e27b00c00fbabcd075
            path: ${source.dir}/opensearch-dashboards
            spdx:
              name: opensearch-dashboards
              version: 3.4.0
              packages:
                - name: opensearch-dashboards
                  purl: pkg:dhi/opensearch-dashboards@3.4.0
                  license: Apache-2.0
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-observability.git#3.4.0.0
            checksum: 38ffdc9bd80254a08ac67abf75141385867baf3e
            path: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-reporting.git#3.4.0.0
            checksum: 9897418e8372e3d588c1979e60b3efc6ff97db2e
            path: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-query-workbench.git#3.4.0.0
            checksum: dec5f72bc48917751dde1b38f0e653a15e5091b9
            path: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-maps.git#3.4.0.0
            checksum: f5c851e6861457fdb35caf481245038402436f17
            path: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/anomaly-detection-dashboards-plugin.git#3.4.0.0
            checksum: ff906088864d19e6f138a7f4cd2b1b79b9092b63
            path: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/ml-commons-dashboards.git#3.4.0.0
            checksum: 464ba767a693676f1b81e847eba254749d2c9e56
            path: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/index-management-dashboards-plugin.git#3.4.0.0
            checksum: 5bdca73257641eeb02168e5e6ba973fd325a28e7
            path: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-notifications.git#3.4.0.0
            checksum: 099f245a630d2e324c380fd9ca851f99b99e3c03
            path: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/alerting-dashboards-plugin.git#3.4.0.0
            checksum: 0a6a99334c15de17d75ea0cc8bab253a94eb86ac
            path: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/security-analytics-dashboards-plugin.git#3.4.0.0
            checksum: 1048b97e9f06a59c8e486405c94f1312372dc150
            path: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/security-dashboards-plugin.git#3.4.0.0
            checksum: 08375f7f429f136cc7fd8f9a14845993101d087d
            path: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-search-relevance.git#3.4.0.0
            checksum: b6d71572cd7678bd84e1821b7dfea6f2cb5f94db
            path: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-assistant.git#3.4.0.0
            checksum: 4f07a0d44ab4d1f59fe678b3dae335c0f560ad51
            path: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-flow-framework.git#3.4.0.0
            checksum: 42a29c30deb753b4b3b80c8bd4691237f78bae85
            path: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/query-insights-dashboards.git#3.4.0.0
            checksum: 418bc1de322b67345eaee6c72465973d8c34049d
            path: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
            uid: 1000
            gid: 1000
      pipeline:
        - name: patch opensearch-dashboards to use tar 7
          uses: git/patch@v1
          work-dir: ${source.dir}/opensearch-dashboards
          with:
            patch: ${source.dir}/patches/tar7.patch
        - name: patch opensearch-dashboards with unified yarn patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards
        - name: patch opensearch-dashboards base with specific yarn patch
          uses: yarn/bump@v1
          run-as: opensearch-dashboards
          privileged: true
          with:
            patches: ${source.dir}/patches/base-patch.json
            skip-yarn-add: false
            yarn-root: ${source.dir}/opensearch-dashboards
        - name: patch observabilityDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
        - name: create tesseract directory for reportsDashboards
          privileged: true
          runs: |
            set -eux -o pipefail

            # Create the directory and ensure parent directories exist with correct permissions
            mkdir -p ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract
            # Ensure the directory is owned by uid 1000 and has proper permissions for the postinstall script
            chown -R 1000:1000 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common
            chmod 755 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract
        - name: patch reportsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: false
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
        - name: fix tesseract directory permissions after patch
          privileged: true
          runs: |
            set -eux -o pipefail

            # Ensure the tesseract directory and any files created during patch are owned by uid 1000
            if [ -d "${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract" ]; then
              chown -R 1000:1000 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract || true
              chmod -R 755 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract || true
            fi
        - name: patch queryWorkbenchDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
        - name: patch anomalyDetectionDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
        - name: patch indexManagementDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
        - name: patch notificationsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
        - name: patch alertingDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
        - name: patch securityAnalyticsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
        - name: patch securityDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
        - name: patch searchRelevanceDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
        - name: patch assistantDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
        - name: patch customImportMapDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
        - name: patch mlCommonsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
        - name: patch flowFrameworkDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
        - name: patch queryInsightsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
        - name: ensure tesseract directory permissions before bootstrap
          privileged: true
          runs: |
            set -eux -o pipefail

            tesseract_dir="${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract"
            if [ -d "${tesseract_dir}" ]; then
              # Remove any existing files so they can be recreated with proper permissions
              rm -f "${tesseract_dir}"/* || true
              # Ensure directory is owned by uid 1000 and writable
              chown -R 1000:1000 "${tesseract_dir}"
              chmod 755 "${tesseract_dir}"
            fi
        - name: Bootstrap opensearch-dashboards with plugins
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            yarn osd bootstrap --single-version 'ignore'
        - name: build all plugins
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards/plugins

            plugin_dirs=$(ls -1d */ | sed 's:/$::')
            for dir_name in $plugin_dirs; do
              echo "Building plugin: ${dir_name}"
              cd "${dir_name}"
              yarn build
              cd ..
            done
        - name: build opensearch-dashboards
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            yarn run build-platform --${OPENSEARCH_BUILD_ARCH} --skip-os-packages
        - name: extract opensearch-dashboards
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            # take the tarball in the build directory and extract it to the target directory
            ls -la ${source.dir}/opensearch-dashboards/build
            ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards
            ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards-3.4.0-SNAPSHOT-${OPENSEARCH_DIST_ARCH}
            cp -r ${source.dir}/opensearch-dashboards/build/opensearch-dashboards ${target.dir}/opensearch-dashboards
        - name: extract plugin builds to target
          runs: |
            set -eux -o pipefail

            # Create plugins directory in target
            mkdir -p ${target.dir}/opensearch-dashboards/plugins

            # For each plugin directory, find a zip containing 3.4.0 (handles optional ".0") and extract it
            cd ${source.dir}/opensearch-dashboards/plugins

            plugin_dirs=$(ls -1d */ | sed 's:/$::')
            for dir_name in $plugin_dirs; do
              build_dir="${dir_name}/build"
              echo "Processing plugin: ${dir_name}"
              if [ ! -d "${build_dir}" ]; then
                echo "Error: build directory not found for ${dir_name}, skipping"
                exit 1
              fi

              # Use find to locate a zip file that contains the VERSION in its name.
              # This handles names like plugin-3.4.0.zip and plugin-3.4.0.0.zip
              found_zip=$(find "${build_dir}" -maxdepth 1 -type f -iname "*3.4.0*.zip" | head -n 1 || true)

              if [ -z "${found_zip}" ]; then
                echo "Error: No zip found for plugin ${dir_name} containing version 3.4.0"
                exit 1
              fi

              echo "Found artifact: ${found_zip}, extracting to ${target.dir}/opensearch-dashboards/plugins/"
              unzip -q "${found_zip}" -d "${target.dir}/opensearch-dashboards/plugins/"
            done
        - name: copy over plugins to final dir inside opensearch-dashboards plugins dir
          runs: |
            set -eux -o pipefail

            mkdir -p ${source.dir}/tmp/plugins
            cp -r ${target.dir}/opensearch-dashboards/plugins/opensearch-dashboards/* ${source.dir}/tmp/plugins
            rm -rf ${target.dir}/opensearch-dashboards/plugins
            rm -rf ${source.dir}/tmp/plugins/opensearch-dashboards
            cp -r ${source.dir}/tmp/plugins ${target.dir}/opensearch-dashboards/plugins
      paths:
        - type: file
          path: /src/patches/unified-patches.json
          uid: 1000
          gid: 1000
          mode: "0777"
          source: image/opensearch-dashboards/patch/unified-patches.json
        - type: file
          path: /src/patches/base-patch.json
          uid: 1000
          gid: 1000
          mode: "0777"
          source: image/opensearch-dashboards/patch/base-patch.json
        - type: file
          path: /src/patches/tar7.patch
          uid: 1000
          gid: 1000
          source: image/opensearch-dashboards/patch/tar7.patch
      accounts:
        run-as: opensearch-dashboards
        users:
          - name: opensearch-dashboards
            uid: 1000
            gid: 1000
        groups:
          - name: opensearch-dashboards
            gid: 1000
            members:
              - opensearch-dashboards
      outputs:
        - source: ${target.dir}/opensearch-dashboards
          target: /usr/share/opensearch-dashboards
          uid: 0
          gid: 0
        - source: ${target.dir}/opensearch-dashboards/config
          target: /usr/share/opensearch-dashboards/config
          uid: 1000
          gid: 1000
        - source: /opt/docker/sbom/opensearch-dashboards
          target: /opt/docker/sbom/opensearch-dashboards
          uid: 0
          gid: 0
    - name: opensearch-dashboards files from upstream
      contents:
        packages:
          - bash
          - coreutils
          - findutils
        files:
          - url: git+https://github.com/opensearch-project/opensearch-build.git#3.4.0
            checksum: 9917c3edf20efcd4db8328b732a6cfc4673675ca
            path: ${source.dir}/opensearch-build-9917c3edf20efcd4db8328b732a6cfc4673675ca
            uid: 0
            gid: 0
      pipeline:
        - name: copy config and entrypoint files
          runs: |
            set -eux -o pipefail

            cp "${source.dir}/opensearch-build-9917c3edf20efcd4db8328b732a6cfc4673675ca/docker/release/config/opensearch-dashboards/opensearch-dashboards-docker-entrypoint-3.x.sh" "${target.dir}/docker-entrypoint.sh"
            # /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
            cp "${source.dir}/opensearch-build-9917c3edf20efcd4db8328b732a6cfc4673675ca/config/opensearch_dashboards-3.x.yml" "${target.dir}/opensearch_dashboards.yml"
        - name: customize config
          runs: |
            set -eux -o pipefail

            # This is what upstream does in their docker images so it is important to do this here
            echo "Setting default network host in opensearch-dashboards config..."
            echo "server.host: '0.0.0.0'" >> "${target.dir}/opensearch_dashboards.yml"
      outputs:
        - source: ${target.dir}/docker-entrypoint.sh
          target: /usr/local/bin/docker-entrypoint.sh
          uid: 0
          gid: 0
        - source: ${target.dir}/opensearch_dashboards.yml
          target: /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
          uid: 1000
          gid: 1000
  artifacts:
    - name: dhi.io/node:20.20.0-debian13@sha256:348f038757cc47f231bf4be5932f1227dc7535f0d6d0b2c8f0f6b94b4c937cd9
      includes:
        - opt/nodejs
      uid: 0
      gid: 0
accounts:
  run-as: opensearch-dashboards
  users:
    - name: opensearch-dashboards
      uid: 1000
      gid: 1000
  groups:
    - name: opensearch-dashboards
      gid: 1000
      members:
        - opensearch-dashboards
os-release:
  name: Docker Hardened Images (Debian)
  id: debian
  version-id: "13"
  version-codename: trixie
  pretty-name: Docker Hardened Images/Debian GNU/Linux 13 (trixie)
  home-url: https://docker.com/products/hardened-images/
  bug-report-url: https://docker.com/support/
work-dir: /usr/share/opensearch-dashboards
environment:
  HOME: /usr/share/opensearch-dashboards
  OPENSEARCH_DASHBOARDS_HOME: /usr/share/opensearch-dashboards
  OPENSEARCH_DASHBOARDS_PATH_CONF: /usr/share/opensearch-dashboards/config
  PATH: /usr/share/opensearch-dashboards/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
paths:
  - type: directory
    path: /usr/share/opensearch-dashboards/data
    uid: 1000
    gid: 1000
  - type: directory
    path: /usr/share/opensearch-dashboards/logs
    uid: 1000
    gid: 1000
  - type: symlink
    path: /usr/share/opensearch-dashboards/node
    uid: 0
    gid: 0
    source: /opt/nodejs/node-v20.20.0
annotations:
  org.opencontainers.image.description: A minimal OpenSearch Dashboards image
  org.opencontainers.image.licenses: Apache-2.0
entrypoint:
  - /usr/local/bin/docker-entrypoint.sh
cmd:
  - opensearch-dashboards
ports:
  - 5601/tcp
