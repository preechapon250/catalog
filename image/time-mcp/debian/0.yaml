# syntax=dhi.io/build:2-debian13

name: Time MCP Server 2025.x
image: dhi.io/time-mcp
variant: runtime
tags:
  - "2025"
  - latest
  - "2025.12"
  - 2025.12.18
  - 2025-debian13
  - 2025.12-debian13
  - 2025.12.18-debian13
platforms:
  - linux/amd64
  - linux/arm64
vars:
  ARCH: '#{ target.arch == "amd64" ? "x86_64" : "aarch64" }'
  COMMIT_SHA: 24b9402fd6904e74dff78d06be313fc8b701b937
  PYTHON_DEV_REFERENCE: dhi/python:3.14.2-debian13-sfw-dev@sha256:433342c192363df22d010c85145560c79e4e454e8ec0bdc2e9d3b518482960bb
  PYTHON_REFERENCE: dhi/python:3.14.2-debian13@sha256:f7dda626c48d33c069bb7183063eda9190f4d3d62d292736b74ce19bea9ac72e
  SEMVER_MAJOR_MINOR_VERSION: "2025.12"
  SEMVER_MAJOR_VERSION: "2025"
  SEMVER_VERSION: 2025.12.18
  UV_VERSION: 0.9.22
  VERSION: 2025.12.18
contents:
  packages:
    - '!libelogind0'
    - '!mawk'
    - '!original-awk'
    - base-files
  builds:
    - name: time-mcp
      uses: dhi.io/python:3.14.2-debian13-sfw-dev@sha256:433342c192363df22d010c85145560c79e4e454e8ec0bdc2e9d3b518482960bb
      environment:
        UV_COMPILE_BYTECODE: "1"
      contents:
        packages:
          - gzip
          - tar
        files:
          - url: https://github.com/astral-sh/uv/releases/download/0.9.22/uv-${ARCH}-unknown-linux-gnu.tar.gz
            path: ${source.dir}/uv-unknown-linux-gnu.tar.gz
            uid: 0
            gid: 0
          - url: git+https://github.com/modelcontextprotocol/servers.git#2025.12.18
            checksum: 24b9402fd6904e74dff78d06be313fc8b701b937
            path: ${source.dir}/servers
            spdx:
              name: time-mcp
              version: 2025.12.18
              packages:
                - name: time-mcp
                  purl: pkg:dhi/time-mcp@2025.12.18
                  license: MIT
            uid: 0
            gid: 0
      pipeline:
        - name: setup uv
          runs: |
            set -eux -o pipefail

            mkdir -p /usr/local/bin
            tar -xzf "${source.dir}/uv-unknown-linux-gnu.tar.gz" -C /usr/local/bin --strip-components=1
            chmod +x /usr/local/bin/uv
        - name: move to /app
          runs: |
            set -eux -o pipefail

            cp -r "${source.dir}/servers/src/time" /app
        - name: build python package
          work-dir: /app
          privileged: true
          runs: |
            set -eux -o pipefail

            rm .python-version

            sfw uv lock --upgrade
            sfw uv sync --locked --no-install-project --no-dev --no-editable
            sfw uv sync --locked --no-dev --no-editable
      outputs:
        - source: /app/.venv
          target: /app/.venv
          uid: 0
          gid: 0
        - source: /opt/docker/sbom/time-mcp
          target: /opt/docker/sbom/time-mcp
          uid: 0
          gid: 0
  artifacts:
    - name: dhi.io/python:3.14.2-debian13@sha256:f7dda626c48d33c069bb7183063eda9190f4d3d62d292736b74ce19bea9ac72e
      uid: 0
      gid: 0
accounts:
  run-as: nonroot
  users:
    - name: nonroot
      uid: 65532
      gid: 65532
  groups:
    - name: nonroot
      gid: 65532
      members:
        - nonroot
os-release:
  name: Docker Hardened Images (Debian)
  id: debian
  version-id: "13"
  version-codename: trixie
  pretty-name: Docker Hardened Images/Debian GNU/Linux 13 (trixie)
  home-url: https://docker.com/products/hardened-images/
  bug-report-url: https://docker.com/support/
environment:
  LOCAL_TIMEZONE: UTC
  PATH: /app/.venv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
annotations:
  org.opencontainers.image.description: Time MCP Server
  org.opencontainers.image.licenses: MIT
labels:
  io.modelcontextprotocol.server.name: io.github.modelcontextprotocol/server-time
entrypoint:
  - mcp-server-time
