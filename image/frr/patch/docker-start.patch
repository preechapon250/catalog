From 176a63527090079241113e681002bbe4043f2d1c Mon Sep 17 00:00:00 2001
From: Grant Orndorff <grant.orndorff@docker.com>
Date: Tue, 13 Jan 2026 13:35:05 -0500
Subject: [PATCH] docker/debian: Add log function definitions to docker-start

The docker-start script sources frrcommon.sh which requires log_success_msg,
log_warning_msg, and log_failure_msg functions to be defined by the caller.

The alpine version of docker-start already includes these definitions with
a fallback if LSB init-functions are not available. This commit adds the
same logic to the debian version.

Without these definitions, errors like 'log_failure_msg: command not found'
appear when daemons fail to start or when daemon binaries are missing.

This matches the implementation in docker/alpine/docker-start.
---
 docker/debian/docker-start | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/docker/debian/docker-start b/docker/debian/docker-start
index d954142ab..094155667 100755
--- a/docker/debian/docker-start
+++ b/docker/debian/docker-start
@@ -1,4 +1,18 @@
 #!/bin/bash
 
+if [ -r "/lib/lsb/init-functions" ]; then
+	. /lib/lsb/init-functions
+else
+	log_success_msg() {
+		echo "$@"
+	}
+	log_warning_msg() {
+		echo "$@" >&2
+	}
+	log_failure_msg() {
+		echo "$@" >&2
+	}
+fi
+
 source /usr/lib/frr/frrcommon.sh
 /usr/lib/frr/watchfrr $(daemon_list)
-- 
2.50.1 (Apple Git-155)
